"use strict";(self.webpackChunkSoccerStars=self.webpackChunkSoccerStars||[]).push([[575],{3575:(q,m,r)=>{r.r(m),r.d(m,{MercadoModule:()=>y});var u=r(6019),l=r(6916),b=r(6417),p=r(2501),v=r(481),T=r(273),e=r(3668),j=r(2995),J=r(7621),x=r(9192),A=r(566),f=r(397);function C(s,i){1&s&&(e.TgZ(0,"td"),e._uU(1,"Libre"),e.qZA())}function M(s,i){1&s&&(e.TgZ(0,"td"),e._uU(1,"En venta"),e.qZA())}function O(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",5),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.YNc(5,C,2,0,"td",6),e.YNc(6,M,2,0,"td",6),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"number"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"td"),e._UZ(14,"input",7),e.qZA(),e.TgZ(15,"td"),e.TgZ(16,"button",8),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().comprarJugador(a.id)}),e._uU(17,"Comprar"),e.qZA(),e.qZA(),e.qZA()}if(2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.edad),e.xp6(1),e.Q6J("ngIf","libre"==t.estatus),e.xp6(1),e.Q6J("ngIf","en venta"==t.estatus),e.xp6(2),e.hij("",e.xi3(9,7,t.indiceVictoria,"1.2-2")," %"),e.xp6(3),e.hij("",e.lcZ(12,10,t.precio)," \u20ac"),e.xp6(3),e.s9C("id",t.id)}}const S=[{path:"",component:(()=>{class s{constructor(t,o,n,a,d,c){this.router=t,this.servicioJugador=o,this.servicioEquipo=n,this.userSubject=a,this.servicioUsuario=d,this.messageService=c,this.jwt=new b.N0,this.misJugadores=[],this.listajugadores=[],this.posiciones=[],this.dtOptions={},this.dtTrigger=new T.x,this.userSubject.userDetails$.subscribe(g=>setTimeout(()=>this.userDetails=g,0))}ngOnInit(){let t=this.servicioUsuario.getToken();null!=t&&(this.userDetails=this.jwt.decodeToken(JSON.stringify(t)),this.userSubject.changeNavBar(this.userDetails)),this.obtenerJugadoresDelDia(),this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthMenu:[5,10,20],responsive:!0,language:{url:"http://cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"}}}rerender(){this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next(null)})}comprarJugador(t){let o=document.getElementById(t.toString());const a={idjugador:t,precio:parseInt(o.value)};this.servicioJugador.enviarOferta(a).subscribe({next:d=>{const c=this.listajugadores.map(h=>h.id).indexOf(a.idjugador);let g=this.listajugadores[c];"libre"==g.estatus?(this.messageService.add({severity:"success",detail:"Se ha a\xf1adido el jugador",life:1500}),this.listajugadores.splice(c,1),this.servicioEquipo.obtenerEquipo().subscribe({next:h=>{this.userSubject.rechargePresupuesto(h.presupuesto)}})):"en venta"==g.estatus&&this.messageService.add({severity:"success",detail:"Se ha enviado la oferta",life:1500}),this.rerender()},error:d=>{this.messageService.add({severity:"error",detail:d.error.mensaje,life:1500})}})}obtenerJugadoresDelDia(){this.servicioEquipo.obtenerEquipo().subscribe({next:t=>{this.misJugadores=t.jugadores,this.servicioJugador.obtenerJugadoresLibres().subscribe({next:o=>{this.listajugadores=o;let n=0;for(;n<this.misJugadores.length;){let a=this.listajugadores.map(d=>d.id).indexOf(this.misJugadores[n].id);-1!=a&&this.listajugadores.splice(a,1),n++}this.dtTrigger.next(null)},error:o=>{this.messageService.add({severity:"error",detail:o.error.mensaje,life:1500})}})}})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(l.F0),e.Y36(j.k),e.Y36(J.A),e.Y36(x.t),e.Y36(A.i),e.Y36(v.ez))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-jugadores"]],viewQuery:function(t,o){if(1&t&&e.Gf(p.G,5),2&t){let n;e.iGM(n=e.CRH())&&(o.dtElement=n.first)}},features:[e._Bn([v.ez])],decls:22,vars:3,consts:[["position","top-center"],[1,"table-responsive"],["datatable","",1,"row-border","hover",2,"width","100%",3,"dtOptions","dtTrigger"],[1,"ancho-columna"],[4,"ngFor","ngForOf"],["name","jugador"],[4,"ngIf"],["id","input","type","number","name","cantidad",3,"id"],["name","comprar",1,"btn","btn-success",3,"click"]],template:function(t,o){1&t&&(e._UZ(0,"p-toast",0),e._UZ(1,"br"),e.TgZ(2,"div",1),e.TgZ(3,"table",2),e.TgZ(4,"thead"),e.TgZ(5,"tr"),e.TgZ(6,"th",3),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"th",3),e._uU(9,"Edad"),e.qZA(),e.TgZ(10,"th",3),e._uU(11,"Estado"),e.qZA(),e.TgZ(12,"th",3),e._uU(13,"\xcdndice de Victoria"),e.qZA(),e.TgZ(14,"th",3),e._uU(15,"Valor de Mercado"),e.qZA(),e.TgZ(16,"th",3),e._uU(17,"Precio"),e.qZA(),e.TgZ(18,"th",3),e._uU(19,"Acci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"tbody"),e.YNc(21,O,18,12,"tr",4),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("dtOptions",o.dtOptions)("dtTrigger",o.dtTrigger),e.xp6(18),e.Q6J("ngForOf",o.listajugadores))},directives:[f.FN,p.G,u.sg,u.O5],pipes:[u.JJ],styles:[".ancho-columna[_ngcontent-%COMP%]{width:19%}table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0 15px}th[_ngcontent-%COMP%]{background-color:#49963d;color:#fff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{width:150px;text-align:center;border:1px solid rgb(255,254,254);padding:0}h2[_ngcontent-%COMP%]{color:#4287f5}"]}),s})()}];let U=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[l.Bz.forChild(S)],l.Bz]}),s})();var Z=r(7537);let y=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[u.ez,Z.u5,Z.UX,p.T,U,f.EV]]}),s})()}}]);